
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Make OpenAPI the source of truth for K8s configuration">
      
      
        <meta name="author" content="Kubeshop Kusk Team">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.9">
    
    
      
        <title>Using with ArgoCD - Kusk</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.120efc48.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-204665550-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#argocd" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kusk" class="md-header__button md-logo" aria-label="Kusk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kusk
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using with ArgoCD
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kubeshop/kusk-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    kubeshop/kusk
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kusk" class="md-nav__button md-logo" aria-label="Kusk" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Kusk
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kubeshop/kusk-gen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    kubeshop/kusk
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../openapi-extension/" class="md-nav__link">
        OpenAPI Extension
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Using with ArgoCD
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Using with ArgoCD
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-kusk-as-a-custom-tool" class="md-nav__link">
    Install Kusk as a custom tool
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-ui" class="md-nav__link">
    Use kusk-gen in ArgoCD UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-cli" class="md-nav__link">
    Use kusk-gen in ArgoCD CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-app-manifest" class="md-nav__link">
    Use kusk-gen in ArgoCD App manifest
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" data-md-state="indeterminate" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Generators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Generators" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Generators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ambassador/" class="md-nav__link">
        Ambassador 1.X
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ambassador2/" class="md-nav__link">
        Ambassador 2.X
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../linkerd/" class="md-nav__link">
        Linkerd
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ingress-nginx/" class="md-nav__link">
        Ingress-Nginx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../traefik/" class="md-nav__link">
        Traefik
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../development/" class="md-nav__link">
        For Developers
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-kusk-as-a-custom-tool" class="md-nav__link">
    Install Kusk as a custom tool
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-ui" class="md-nav__link">
    Use kusk-gen in ArgoCD UI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-cli" class="md-nav__link">
    Use kusk-gen in ArgoCD CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-kusk-gen-in-argocd-app-manifest" class="md-nav__link">
    Use kusk-gen in ArgoCD App manifest
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/kubeshop/kusk-gen/blob/main/docs/argocd.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="argocd">ArgoCD</h1>
<p><img alt="image" src="https://user-images.githubusercontent.com/14029650/129344427-1217687a-1d9c-490c-b877-d14d5e2638d9.png" /></p>
<p>It is possible to make your OpenAPI schema the real source of truth for your K8s configurations with Kusk - by using it as an ArgoCD's <a href="https://argoproj.github.io/argo-cd/operator-manual/custom_tools">custom tool</a>!</p>
<p>GitOps approach will allow you to use ArgoCD to automatically generate configurations in a determinative way based off your OpenAPI schema that you can store in Git to easily version, review and rollback your APIs. ArgoCD will take care of automatically syncing your configurations, while Kusk will happily generate it for you every time you make a change.</p>
<p>This guide will help you setup Kusk in ArgoCD.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#install-kusk-as-a-custom-tool">Install Kusk as a custom tool</a></li>
<li><a href="#use-kusk-in-argocd-ui">Use Kusk in ArgoCD UI</a></li>
<li><a href="#use-kusk-in-argocd-cli">Use Kusk in ArgoCD CLI</a></li>
<li><a href="#use-kusk-in-argocd-app-manifest">Use Kusk in ArgoCD App manifest</a></li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li>Have a working ArgoCD installation - <a href="https://argoproj.github.io/argo-cd/getting_started/">ArgoCD quick start</a>.</li>
<li>Have a repository with OpenAPI schema configured within ArgoCD - for this example we will use Kusk's <a href="./examples/petstore">example folder</a>.</li>
</ol>
<h2 id="install-kusk-as-a-custom-tool">Install Kusk as a custom tool</h2>
<p>To install a custom tool in ArgoCD, we will follow the official <a href="https://argoproj.github.io/argo-cd/operator-manual/custom_tools/#adding-tools-via-volume-mounts">guide</a>.
We will add an <code>initContainer</code> to <code>argocd-repo-server</code> and a volume to download Kusk's binary to:
<div class="highlight"><pre><span></span><code><span class="gd">--- a/argocd-repo-server.yaml</span><span class="w"></span>
<span class="gi">+++ b/argocd-repo-server.yaml</span><span class="w"></span>
<span class="gu">@@ -31,6 +31,16 @@ spec:</span><span class="w"></span>
<span class="w"> </span>                topologyKey: kubernetes.io/hostname<span class="w"></span>
<span class="w"> </span>              weight: 5<span class="w"></span>
<span class="w"> </span>      automountServiceAccountToken: false<span class="w"></span>
<span class="gi">+      initContainers:</span><span class="w"></span>
<span class="gi">+        - name: download-kusk-gen</span><span class="w"></span>
<span class="gi">+          image: alpine:3.8</span><span class="w"></span>
<span class="gi">+          command: [ sh, -c ]</span><span class="w"></span>
<span class="gi">+          args:</span><span class="w"></span>
<span class="gi">+            - wget -qO- https://github.com/kubeshop/kusk-gen/releases/latest/download/kusk-gen_Linux_arm64.tar.gz | tar -xvzf - &amp;&amp;</span><span class="w"></span>
<span class="gi">+              mv kusk /custom-tools/</span><span class="w"></span>
<span class="gi">+          volumeMounts:</span><span class="w"></span>
<span class="gi">+            - mountPath: /custom-tools</span><span class="w"></span>
<span class="gi">+              name: kusk-gen</span><span class="w"></span>
<span class="w"> </span>      containers:<span class="w"></span>
<span class="w"> </span>        - command:<span class="w"></span>
<span class="w"> </span>            - uid_entrypoint.sh<span class="w"></span>
<span class="gu">@@ -72,7 +82,12 @@ spec:</span><span class="w"></span>
<span class="w"> </span>              name: gpg-keyring<span class="w"></span>
<span class="w"> </span>            - mountPath: /app/config/reposerver/tls<span class="w"></span>
<span class="w"> </span>              name: argocd-repo-server-tls<span class="w"></span>
<span class="gi">+            - mountPath: /usr/local/bin/kusk-gen</span><span class="w"></span>
<span class="gi">+              name: kusk-gen</span><span class="w"></span>
<span class="gi">+              subPath: kusk-gen</span><span class="w"></span>
<span class="w"> </span>      volumes:<span class="w"></span>
<span class="gi">+        - name: kusk-gen</span><span class="w"></span>
<span class="gi">+          emptyDir: {}</span><span class="w"></span>
<span class="w"> </span>        - configMap:<span class="w"></span>
<span class="w"> </span>            name: argocd-ssh-known-hosts-cm<span class="w"></span>
<span class="w"> </span>          name: ssh-known-hosts<span class="w"></span>
</code></pre></div></p>
<p>When installed, Kusk binary will be available during ArgoCD sync. To use that, we'll register a <a href="https://argoproj.github.io/argo-cd/user-guide/application_sources/#config-management-plugins">configuration management plugin</a>:
<div class="highlight"><pre><span></span><code><span class="gd">--- a/argocd-cm.yaml</span><span class="w"></span>
<span class="gi">+++ b/argocd-cm.yaml</span><span class="w"></span>
<span class="gu">@@ -5,3 +5,9 @@ metadata:</span><span class="w"></span>
<span class="w"> </span>    app.kubernetes.io/name: argocd-cm<span class="w"></span>
<span class="w"> </span>    app.kubernetes.io/part-of: argocd<span class="w"></span>
<span class="w"> </span>  name: argocd-cm<span class="w"></span>
<span class="gi">+data:</span><span class="w"></span>
<span class="gi">+  configManagementPlugins: |</span><span class="w"></span>
<span class="gi">+    - name: kusk-gen</span><span class="w"></span>
<span class="gi">+      generate:</span><span class="w"></span>
<span class="gi">+        command: [&quot;/bin/sh&quot;, &quot;-c&quot;]</span><span class="w"></span>
<span class="gi">+        args: [&quot;kusk-gen $KUSK_GENERATOR -i $KUSK_INPUT $KUSK_ARGS&quot;]</span><span class="w"></span>
</code></pre></div></p>
<p>Once these changes are applied to your ArgoCD installation, you can begin to use Kusk!</p>
<h2 id="use-kusk-gen-in-argocd-ui">Use kusk-gen in ArgoCD UI</h2>
<p>When you are <a href="https://argoproj.github.io/argo-cd/getting_started/#creating-apps-via-ui">creating an App via UI</a>, scroll down and select "Plugin" as a configuration management tool:
<img alt="image" src="https://user-images.githubusercontent.com/14029650/129340017-04ef2221-1793-4087-bf95-d60b1f2900d4.png" /></p>
<p>After that, select kusk-gen as a plugin and fill the environment variables to specify the generator you want to invoke and the input file with your OpenAPI schema:
<img alt="image" src="https://user-images.githubusercontent.com/14029650/129340227-d729cb61-7c28-4869-80dd-9cea7153cfbd.png" /></p>
<p>ArgoCD will sync your app and you will be able to see resources generated and applied to your cluster automatically ðŸª„:
<img alt="image" src="https://user-images.githubusercontent.com/14029650/129340502-e469fd2e-d745-483e-ba11-954dcc5c3ab2.png" /></p>
<h2 id="use-kusk-gen-in-argocd-cli">Use kusk-gen in ArgoCD CLI</h2>
<p>It is also possible to <a href="https://argoproj.github.io/argo-cd/getting_started/#creating-apps-via-cli">create an App via CLI</a> with Kusk - just specify <code>--config-management-plugin kusk</code> option:
<div class="highlight"><pre><span></span><code>argocd app create petstore-kusk <span class="se">\</span>
    --config-management-plugin kusk <span class="se">\</span>
    --plugin-env <span class="nv">KUSK_GENERATOR</span><span class="o">=</span>ambassador <span class="se">\</span>
    --plugin-env <span class="nv">KUSK_INPUT</span><span class="o">=</span>petstore_extension.yaml <span class="se">\</span>
    --repo https://github.com/kubeshop/kusk-gen <span class="se">\</span>
    --path examples/petstore <span class="se">\</span>
    --dest-server https://kubernetes.default.svc <span class="se">\</span>
    --dest-namespace default
</code></pre></div></p>
<h2 id="use-kusk-gen-in-argocd-app-manifest">Use kusk-gen in ArgoCD App manifest</h2>
<p>In ArgoCD it is possible to manage applications using App manifest and apply them using <code>kubectl</code>: <a href="https://argoproj.github.io/argo-cd/operator-manual/declarative-setup/">documentation</a>.
To use Kusk in this setup, add Kusk in a <code>plugin</code> node:
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Application</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">petstore-kusk</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">destination</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="w">    </span><span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://kubernetes.default.svc&#39;</span><span class="w"></span>
<span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">examples/petstore</span><span class="w"></span>
<span class="w">    </span><span class="nt">repoURL</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;https://github.com/kubeshop/kusk-gen&#39;</span><span class="w"></span>
<span class="w">    </span><span class="nt">targetRevision</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span><span class="w"></span>
<span class="w">    </span><span class="nt">plugin</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kusk</span><span class="w"></span>
<span class="w">      </span><span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KUSK_INPUT</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">petstore_extension.yaml</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KUSK_GENERATOR</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ambassador</span><span class="w"></span>
<span class="w">  </span><span class="nt">project</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<span class="w">  </span><span class="nt">syncPolicy</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">automated</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">prune</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">      </span><span class="nt">selfHeal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</code></pre></div></p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../openapi-extension/" class="md-footer__link md-footer__link--prev" aria-label="Previous: OpenAPI Extension" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              OpenAPI Extension
            </div>
          </div>
        </a>
      
      
        
        <a href="../ambassador/" class="md-footer__link md-footer__link--next" aria-label="Next: Ambassador 1.X" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Ambassador 1.X
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 <a href="https://kubeshop.io">Kubeshop</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6e54b5cd.min.js"></script>
      
    
  </body>
</html>